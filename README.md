[![develop build check and CI check on docker](https://github.com/Two-Potatoes/BobJoying-Back/actions/workflows/develop-ci.yml/badge.svg)](https://github.com/Two-Potatoes/BobJoying-Back/actions/workflows/develop-ci.yml)

# 🍚 밥조잉 🍚

### 🙆‍♀️ 내 손 안에 냉장고 🙆‍♂️

프로젝트 기간 : 2024/01/31 ~

🙋‍♀️ 우리 서비스는요...

1. 냉장고의 **식재료를 관리**해줘요! - 개발 중⏩
2. 냉장고의 식재료로 할 수 있는 **레시피를 등록하고 관리**할 수 있어요! - 개발 중⏩
3. 냉장고를 공유하는 그룹원에게 먹고 싶은 **레시피를 요청**할 수 있어요! - 개발 중⏩
4. **식사 기록**이 가능하고 그룹원들의 오늘 식사 기록을 **피드**에서 확인할 수 있어요! - 개발 중⏩

<img src="https://github.com/Two-Potatoes/BobJoying-Back/assets/130378232/8c5fadcd-acc6-4031-bc3a-b5711cabf110" width="400px">

### [📚 밥조잉 Notion 보러 가기](https://two-potatoes.notion.site/BobJoying-ed09d53973684322a47bef4abfafa8e3?pvs=4)

<br>

## 📐 Architecture

<img src="https://github.com/Two-Potatoes/BobJoying-Back/assets/130378232/8d6575b8-7b57-470b-bc0f-39894796dcb9" width="700px">

<br><br>

## 💬 ERD

###### 토글을 누르면 ERD를 확인할 수 있습니다!

<details>
<summary> ERD 보기 </summary>

<img src="https://github.com/Two-Potatoes/BobJoying-Back/assets/130378232/34b7e361-b723-40a5-a5d2-ac34935b5c0e">

</details>

<br>

## 🛠️ 기술 스택

<img src="https://img.shields.io/badge/Java-007396?style=flat-square&logo=OpenJDK&logoColor=white">&nbsp;
<img src="https://img.shields.io/badge/Spring-6DB33F?style=flat-square&logo=spring&logoColor=white">&nbsp;
<img src="https://img.shields.io/badge/Spring Boot-6DB33F?style=flat-square&logo=springboot&logoColor=white">&nbsp;
<img src="https://img.shields.io/badge/Spring Security-6DB33F?style=flat-square&logo=springsecurity&logoColor=white">&nbsp;
<img src="https://img.shields.io/badge/GraphQL-E10098?style=flat-square&logo=graphql&logoColor=white">&nbsp;

<img src="https://img.shields.io/badge/PostgreSQL-4169E1?style=flat-square&logo=postgresql&logoColor=white">&nbsp;
<img src="https://img.shields.io/badge/Redis-DC382D?style=flat-square&logo=redis&logoColor=white">&nbsp;
<img src="https://img.shields.io/badge/Querydsl-3E87D0?style=flat-square&logo=querydsl&logoColor=white">&nbsp;
<img src="https://img.shields.io/badge/Docker-2496ED?style=flat-square&logo=docker&logoColor=white">&nbsp;
<img src="https://img.shields.io/badge/Gradle-02303A?style=flat-square&logo=gradle&logoColor=white">&nbsp;

<img src="https://img.shields.io/badge/GitHub Actions-2088FF?style=flat-square&logo=githubactions&logoColor=white">&nbsp;
<img src="https://img.shields.io/badge/Notion-000000?style=flat-square&logo=notion&logoColor=white">&nbsp;
<img src="https://img.shields.io/badge/Slack-4A154B?style=flat-square&logo=slack&logoColor=white">&nbsp;
<img src="https://img.shields.io/badge/Altair-368CBF?style=flat-square&logo=&logoColor=white">&nbsp;

<br>

## ✨ 프로젝트 자랑

###### 토글을 누르면 해당 내용을 확인할 수 있습니다.

<details>
<summary> 1. 🐳 CI에서 test 코드를 check하고 프로젝트를 도커에서 build해본 후 결과를 슬랙으로 알림이 오도록 했어요!</summary>

<br>

* CI test code 통과 결과를 PR comment에 남기도록 했어요!

<img src="https://github.com/Two-Potatoes/BobJoying-Back/assets/130378232/e771f023-b2e9-4ea0-ae43-c8035231c0bf">

* 도커에서 프로젝트를 build test 해봐요!

<img src="https://github.com/Two-Potatoes/BobJoying-Back/assets/130378232/0a8517dc-2e4f-4609-ab94-f6d16ef8f538">

* CI 결과를 슬랙 채널에서 커스텀한 알림으로 받아볼 수 있어요!

<img src="https://github.com/Two-Potatoes/BobJoying-Back/assets/130378232/bc3db56a-f22c-47f6-9398-a64e90337a67">
<img src="https://github.com/Two-Potatoes/BobJoying-Back/assets/130378232/e7540b39-1924-42fe-83ef-e23963bc3446">

---

</details>

<details>
<summary> 2. 🤝 Backlog와 스프린트를 이용하여 협업과 작업의 효율을 높였어요!</summary>

<br>

* 개발과 관련된 할 일들은 생각나는 대로 `Backlog`에 쌓아요!

<img src="https://github.com/Two-Potatoes/BobJoying-Back/assets/130378232/869a3eb6-a179-4db0-b70e-4f0296891e83">

* Backlog에 있는 작업 중 우선적으로 해야 할 일을 `스프린트`에 커밋한 후 작업해요!

<img src="https://github.com/Two-Potatoes/BobJoying-Back/assets/130378232/22a18fe2-ec94-4fe9-ac87-231fefc531eb">

---

</details>

<details>
<summary> 3. 🔔 Pull Request에서 리뷰 요청, 리뷰 제출 시 슬랙으로 알림이 오도록 했어요!</summary>

<br>

* `Pull Request`에서 <u>**리뷰어를 할당**</u>하면 슬랙으로 메시지가 와요!

리뷰어가 할당되면~

![image](https://github.com/Two-Potatoes/BobJoying-Back/assets/130378232/200a6789-f750-4227-90b1-f2e938d610ba)

슬랙에서 리뷰어를 멘션하고 `PR Title`에 `PR` 링크를 걸어 리뷰를 할 수 있도록 했어요!

![image](https://github.com/Two-Potatoes/BobJoying-Back/assets/130378232/916c44df-d6aa-4856-8cb7-b5bfed528d46)

<br>

* `Pull Request`에서 <u>**리뷰를 제출**</u>하면 슬랙으로 메시지가 와요!

리뷰를 제출하면(`submit`)~

![image](https://github.com/Two-Potatoes/BobJoying-Back/assets/130378232/c4d55269-4967-4cdb-8317-96d9b2e0eda9)

슬랙에서 PR 요청한 사람을 멘션하고 누가 리뷰를 달았는지 알려주고 `PR` 링크를 걸어 리뷰를 확인할 수 있도록 했어요!

![image](https://github.com/Two-Potatoes/BobJoying-Back/assets/130378232/95da636c-2f06-4c18-83df-0a4c669cfba5)

---

</details>

<!--배포 후 추가 개선점, 버전에 따른 기능 기록-->

<br>

## 🎯 Trouble Shooting

###### 해당 항목을 클릭하면 트러블 슈팅 과정을 정리한 블로그로 이동합니다.

[1. GraphQL - mutation 실행 시 필드값이 null로 들어오는 오류](https://argente29.tistory.com/144)

[2. Docker에서 Spring Boot 프로젝트 build 시 GraphQL 요청을 보내지 못하는 오류](https://argente29.tistory.com/143)

[3. Slack Webhook을 이용한 메시지 미리보기가 안 되는 오류](https://argente29.tistory.com/145)

[4. 만료된 토큰에서 토큰에 저장된 정보를 가져올 수 없는 오류](https://argente29.tistory.com/146)

[5. Redis Docker Container와 Spring Boot 연결이 안 되는 오류](https://argente29.tistory.com/147)


<br>

## 🐳 Docker Compose build 

###### 토글을 누르면 해당 내용을 확인할 수 있습니다.

##### 1️⃣ `application-docker.yml` 파일을 `main/resources`에 생성합니다. (Docker용 프로젝트 설정 파일)

<details>
<summary>application-docker.yml</summary>

```yaml
spring:
  graphql:
    schema:
      locations: file:/app/graphql/**
    graphiql:
      enabled: true
  datasource:
    url: { Docker_DB_URL }
    username: { Docker_DB_Username }
    password: { Docker_DB_Password }
    driver-class-name: org.postgresql.Driver
  data:
    redis:
      password: { Docker_Redis_Password }
      port: 6378      # 로컬 Redis의 port와 충돌이 생길 수도 있으므로
      host: host.docker.internal
JWT_SECRET_KEY: { BASE64로 encoding된 key }
```

</details>

##### 2️⃣ 프로젝트 가장 상위 폴더에 `.env` 파일을 생성합니다. (Docker compose script 환경변수 설정)

<details>
<summary>.env</summary>
  
```text
POSTGRES_DB={Docker_DB_name}
POSTGRES_USER={Docker_DB_username}
POSTGRES_PASSWORD={Docker_DB_password}

POSTGRES_LOCAL_PORT=5433
POSTGRES_DOCKER_PORT=5432

SPRING_LOCAL_PORT=8080
SPRING_DOCKER_PORT=8080

REDIS_LOCAL_PORT=6378
REDIS_DOCKER_PORT=6379
```

</details>

##### 3️⃣ `application.properties` 파일을 `main/resources`에 생성합니다. (로컬 build용)

<details>
<summary>application.properties</summary>

```text
spring.datasource.url={ 로컬_DB_URL }
spring.datasource.username={ 로컬_DB_Username }
spring.datasource.password={ 로컬_DB_Password }
spring.datasource.driver-class-name=org.postgresql.Driver

# GraphQL
# graphiql을 통해 테스트 가능 여부 (localhost:8080/graphiql)
spring.graphql.graphiql.enabled=true

# JWT
JWT_SECRET_KEY={ BASE64로 encoding된 key }

# Redis
spring.data.redis.password={ 로컬_Redis_Password }
spring.data.redis.port=6379
spring.data.redis.host=localhost
```

</details>

##### 4️⃣ 로컬에서 project를 build해서 `jar`파일을 생성합니다.

##### 5️⃣ 터미널에서 docker compose 실행 명령어를 입력하여 프로젝트를 build합니다.

```shell
docker-compose -f docker-compose-dev.yml up -d
```

##### ➕ Docker Postgres 컨테이너 접속 명령어

```shell
docker exec -it {postgres 컨테이너 이름} bash
```

<br>

## 👭 우리 팀은요

### Team 감자두리 🥔🥔

🌱 감자 둘이서 꿈틀꿈틀 성장하는 중입니다! 🌱

<img src="https://github.com/Two-Potatoes/BobJoying-Back/assets/130378232/e3100894-4eda-407f-9a99-dfccc18c3031" width=300px>

<br>

|역할|이름|GitHub|
|:---:|:---:|---|
|BE|표지수|https://github.com/JisooPyo|
|FE|조도흔|https://github.com/doheuncho|

